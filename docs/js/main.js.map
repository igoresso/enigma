{"version":3,"file":"main.js","sources":["source/js/data.js","source/js/rotors.js","source/js/lampboard.js","source/js/keyboard.js","source/js/plugboard.js","source/js/settings.js","source/js/message.js","source/js/enigma.js","source/js/main.js"],"sourcesContent":["export const Alphabet = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];\n\nexport const Layout = ['Q','W','E','R','T','Z','U','I','O','A','S','D','F','G','H','J','K','P','Y','X','C','V','B','N','M','L'];\n\nexport const RotorOption = {\n  'I': {\n    'alphabet': ['E','K','M','F','L','G','D','Q','V','Z','N','T','O','W','Y','H','X','U','S','P','A','I','B','R','C','J'],\n    'notch': 'Q'\n  },\n  'II': {\n    'alphabet': ['A','J','D','K','S','I','R','U','X','B','L','H','W','T','M','C','Q','G','Z','N','P','Y','F','V','O','E'],\n    'notch': 'E'\n  },\n  'III': {\n    'alphabet': ['B','D','F','H','J','L','C','P','R','T','X','V','Z','N','Y','E','I','W','G','A','K','M','U','S','Q','O'],\n    'notch': 'V'\n  },\n  'IV': {\n    'alphabet': ['E','S','O','V','P','Z','J','A','Y','Q','U','I','R','H','X','L','N','F','T','G','K','D','C','M','W','B'],\n    'notch': 'J'\n  },\n  'V': {\n    'alphabet': ['V','Z','B','R','G','I','T','Y','U','P','S','D','N','H','L','X','A','W','M','J','Q','O','F','E','C','K'],\n    'notch': 'Z'\n  }\n};\n\nexport const ReflectorOption = {\n  'A': ['E','J','M','Z','A','L','Y','X','V','B','W','F','C','R','Q','U','O','N','T','S','P','I','K','H','G','D'],\n  'B': ['Y','R','U','H','Q','S','L','D','P','X','N','G','O','K','M','I','E','B','F','Z','C','W','V','J','A','T'],\n  'C': ['F','V','P','J','I','A','O','Y','E','D','R','Z','X','W','G','C','T','K','U','Q','S','B','N','M','H','L']\n};\n","import {Alphabet} from './data';\n\nclass Rotors {\n  constructor(classAttribute) {\n    this.rotors = Array.from(document.querySelectorAll(classAttribute)).reverse();\n    this.valueIndex = [];\n  }\n\n  setValue(rotorIndex, value) {\n    const rotor = this.rotors[rotorIndex];\n    const valueIndex = Alphabet.indexOf(value);\n\n    const mainWindow = rotor.querySelector('.rotors__window--active');\n    const firstNextWindow = mainWindow.previousElementSibling;\n    const secondNextWindow = firstNextWindow.previousElementSibling;\n    const firstPrevWindow = mainWindow.nextElementSibling;\n    const secondPrevWindow = firstPrevWindow.nextElementSibling;\n    const wheel = rotor.querySelector('.rotors__wheel');\n\n    const firstNextValueIndex = (valueIndex + 1 > 25) ? 0 : valueIndex + 1;\n    const secondNextValueIndex = (valueIndex + 2 > 25) ? valueIndex - 26 + 2 : valueIndex + 2;\n    const firstPrevValueIndex = (valueIndex - 1 < 0) ? 25 : valueIndex - 1;\n    const secondPrevValueIndex = (valueIndex - 2 < 0) ? valueIndex + 26 - 2 : valueIndex - 2;\n\n    mainWindow.value = Alphabet[valueIndex];\n    firstNextWindow.innerText = Alphabet[firstNextValueIndex];\n    secondNextWindow.innerText = Alphabet[secondNextValueIndex];\n    firstPrevWindow.innerText = Alphabet[firstPrevValueIndex];\n    secondPrevWindow.innerText = Alphabet[secondPrevValueIndex];\n\n    wheel.style.backgroundPositionY = (valueIndex * 100 / 26) * 7 + '%';\n    this.valueIndex[rotorIndex] = valueIndex;\n  }\n\n  stepRotor(rotorIndex) {\n    const newValueIndex = (this.valueIndex[rotorIndex] + 1 > 25) ? 0 : (this.valueIndex[rotorIndex] + 1);\n    const newValue = Alphabet[newValueIndex];\n    this.setValue(rotorIndex, newValue);\n  }\n\n  getCurrentState() {\n    return this.valueIndex;\n  }\n\n  bind() {\n    for (let [index, rotor] of this.rotors.entries()) {\n      const btnNext = rotor.querySelector('.rotors__btn--next');\n      const btnPrev = rotor.querySelector('.rotors__btn--prev');\n      const input = rotor.querySelector('input');\n\n      btnNext.onclick = () => {\n        const currentValueIndex = this.valueIndex[index];\n        const newValueIndex = (currentValueIndex + 1 > 25) ? 0 : currentValueIndex + 1;\n        this.setValue(index, Alphabet[newValueIndex]);\n      };\n\n      btnPrev.onclick = () => {\n        const currentValueIndex = this.valueIndex[index];\n        const newValueIndex = (currentValueIndex - 1 < 0) ? 25 : currentValueIndex - 1;\n        this.setValue(index, Alphabet[newValueIndex]);\n      };\n\n      input.onkeypress = e => {\n        e.stopPropagation();\n      };\n\n      input.onchange = () => {\n        if (input.validity.valid && input.value.length>0) {\n          input.value = input.value.toUpperCase();\n          this.setValue(index, input.value);\n        } else {\n          this.setValue(index,Alphabet[this.valueIndex[index]]);\n        }\n      };\n    }\n  }\n\n  reset() {\n    for (let i = 0; i < this.rotors.length; i++) {\n      this.setValue(i, 'A');\n    }\n  }\n\n  init() {\n    this.reset();\n    this.bind();\n  }\n}\n\nconst rotors = new Rotors('.rotors__item');\nexport default rotors;\n","import {Layout} from './data';\n\nclass Lampboard {\n  constructor(classAttribute) {\n    this.lamps = document.querySelectorAll(classAttribute);\n    this.lastIndex = null;\n  }\n\n  newOutput(letter) {\n    const newIndex = Layout.indexOf(letter);\n    this.reset();\n    this.lamps[newIndex].classList.add('lampboard__lamp--active');\n    this.lastIndex = newIndex;\n  }\n\n  reset() {\n    const currentIndex = this.lastIndex || 0;\n    this.lamps[currentIndex].classList.remove('lampboard__lamp--active');\n    this.lastIndex = null;\n  }\n}\n\nconst lampboard = new Lampboard('.lampboard__lamp');\nexport default lampboard;\n","class Keyboard {\n  constructor(classAttribute) {\n    this.keys = document.querySelectorAll(classAttribute);\n  }\n\n  inputAction(letter) {\n    return letter;\n  }\n\n  bind() {\n    for (let key of this.keys) {\n      const letter = key.innerText.toUpperCase();\n\n      key.onclick = () => {\n        this.inputAction(letter);\n      };\n    }\n\n    document.onkeypress = e => {\n      const re = /^[A-Z]{1}/;\n      const key = e.key.toUpperCase();\n\n      if (re.test(key)) {\n        this.inputAction(key);\n      }\n    };\n  }\n\n  init() {\n    this.bind();\n  }\n}\n\nconst keyboard = new Keyboard('.keyboard__btn');\nexport default keyboard;\n","class Plugboard {\n  constructor(classAttribute) {\n    this.sockets = document.querySelectorAll(classAttribute);\n    this.connections = {};\n    this.prevSocket = null;\n  }\n\n  createPlug(pairLetter) {\n    const plug = document.createElement('div');\n    plug.classList.add('plugboard__plug');\n    plug.tabIndex = 0;\n    plug.setAttribute('role', 'button');\n    plug.innerText = pairLetter.toUpperCase();\n    return plug;\n  }\n\n  disconnectSockets(plug1, plug2, letter1, letter2) {\n    plug1.remove();\n    plug2.remove();\n    delete this.connections[letter1];\n    delete this.connections[letter2];\n  }\n\n  connectSockets(socket1, socket2) {\n    const letter1 = socket2.querySelector('span').innerText;\n    const letter2 = socket1.querySelector('span').innerText;\n    const plug1 = this.createPlug(letter1);\n    const plug2 = this.createPlug(letter2);\n\n    plug1.onclick = (evt) => {\n      evt.stopPropagation();\n      this.disconnectSockets(plug1, plug2, letter1, letter2);\n    };\n\n    plug2.onclick = (evt) => {\n      evt.stopPropagation();\n      this.disconnectSockets(plug1, plug2, letter1, letter2);\n    };\n\n    socket1.appendChild(plug1);\n    socket2.appendChild(plug2);\n    this.connections[letter1] = letter2;\n    this.connections[letter2] = letter1;\n  }\n\n  reset() {\n    for (let socket of this.sockets) {\n      const plug = socket.querySelector('.plugboard__plug');\n      if (!plug) {\n        continue;\n      }\n      plug.remove();\n    }\n\n    this.connections = {};\n  }\n\n  bind() {\n    for (let socket of this.sockets) {\n      socket.onclick = () => {\n        if (this.prevSocket && this.prevSocket !== socket) {\n          this.connectSockets(socket, this.prevSocket);\n          socket.blur();\n          this.prevSocket = null;\n        } else {\n          this.prevSocket = socket;\n        }\n      };\n    }\n  }\n\n  init() {\n    this.bind();\n  }\n}\n\nconst plugboard = new Plugboard('.plugboard__socket');\nexport default plugboard;\n","import {RotorOption, ReflectorOption} from './data';\n\nclass Settings {\n  constructor(classDialogue, classToggle, classSelect) {\n    this.dialogueClass = classDialogue;\n    this.toggleClass = classToggle;\n    this.selectClass = classSelect;\n  }\n\n  changeRotor(rotor, value) {\n    return [rotor, value];\n  }\n\n  changeReflector(value) {\n    return value;\n  }\n\n  createOption(value) {\n    const option = document.createElement('option');\n    option.value = value;\n    option.innerText = value;\n    return option;\n  }\n\n  bind() {\n    const dialogue = document.querySelector(`.${this.dialogueClass}`);\n    const toggle = document.querySelector(`.${this.toggleClass}`);\n    const selects = Array.from(document.querySelectorAll(`.${this.selectClass}`));\n\n    const reflectors = Object.keys(ReflectorOption);\n    const rotors = Object.keys(RotorOption);\n\n    toggle.onclick = () => {\n      toggle.classList.toggle(`${this.toggleClass}--active`);\n      dialogue.classList.toggle(`${this.dialogueClass}--active`);\n    };\n\n    reflectors.forEach((item) => {\n      selects[0].appendChild(this.createOption(item));\n    });\n\n    selects[0].onchange = () => {\n      this.changeReflector(selects[0].value);\n      selects[0].blur();\n    };\n\n    for (let i = 1; i < selects.length; i++) {\n      rotors.forEach((item) => {\n        selects[i].appendChild(this.createOption(item));\n      });\n\n      selects[i].onchange = () => {\n        this.changeRotor(3 - i, selects[i].value);\n        selects[i].blur();\n      };\n    }\n  }\n\n  init() {\n    this.bind();\n    this.reset();\n  }\n\n  reset() {\n    const selects = Array.from(document.querySelectorAll(`.${this.selectClass}`));\n    selects[0].value = 'B';\n    selects[1].value = 'I';\n    selects[2].value = 'II';\n    selects[3].value = 'III';\n  }\n}\n\nconst settings = new Settings('settings__dialogue', 'settings__toggle', 'settings__select');\nexport default settings;\n","class Message {\n  constructor(classModal, classToggle, idDate, idTime, classInput, idCheckbox, classSubmit, classOutput) {\n    this.modalClass = classModal;\n    this.toggleClass = classToggle;\n    this.dateID = idDate;\n    this.timeID = idTime;\n    this.inputClass = classInput;\n    this.checkboxID = idCheckbox;\n    this.submitClass = classSubmit;\n    this.outputClass = classOutput;\n    this.month = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  }\n\n  setTime() {\n    const dateArea = document.getElementById(this.dateID);\n    const timeArea = document.getElementById(this.timeID);\n\n    let today = new Date();\n    let dd = today.getDate();\n    let mm = today.getMonth();\n    let yyyy = today.getFullYear();\n    let hours = today.getHours();\n    let minutes = today.getMinutes();\n\n    dateArea.innerText = `${dd} ${this.month[mm]} ${yyyy}`;\n\n    if(dd < 10) {\n      dd = '0' + dd;\n    }\n\n    mm += 1;\n\n    if(mm < 10) {\n      mm = '0' + mm;\n    }\n\n    dateArea.dateTime = `${yyyy}-${mm}-${dd}`;\n    timeArea.innerText = `${hours}:${minutes}`;\n    timeArea.dateTime = `${hours}:${minutes}`;\n  }\n\n  encryptText(text) {\n    return text;\n  }\n\n  bind() {\n    const modal = document.querySelector(`.${this.modalClass}`);\n    const toggle = document.querySelector(`.${this.toggleClass}`);\n    const content = modal.querySelector(`.${this.modalClass}__content`);\n    const input = document.querySelector(`.${this.inputClass}`);\n    const checkbox = document.getElementById(this.checkboxID);\n    const submit = document.querySelector(`.${this.submitClass}`);\n    const output = document.querySelector(`.${this.outputClass}`);\n\n    toggle.onclick = () => {\n      modal.classList.add(`${this.modalClass}--active`);\n      this.setTime();\n    };\n\n    modal.onclick = () => {\n      modal.classList.remove(`${this.modalClass}--active`);\n    };\n\n    content.onclick = (evt) => {\n      evt.stopPropagation();\n    };\n\n    input.onkeyup = (evt) => {\n      evt.stopPropagation();\n      const re = /[^A-Za-z\\s]/g;\n      input.value = input.value.replace(re, '');\n      input.value = input.value.toUpperCase();\n    };\n\n    submit.onclick = () => {\n      let text = input.value;\n      if (!checkbox.checked) {\n        text = text.replace(/ /g, '').match(/.{1,5}/g).join(' ');\n      }\n\n      output.innerText = this.encryptText(text);\n    };\n  }\n\n  init() {\n    this.bind();\n  }\n}\n\nconst message = new Message('modal', 'modal__toggle', 'date', 'time', 'message__input', 'keep-formatting', 'message__btn', 'message__output');\nexport default message;\n","import {Alphabet} from './data';\n\nclass Enigma {\n  constructor() {\n\n  }\n\n  sumValues(a, b) {\n    return (a + b > 25) ? (a - 26 + b) : (a + b);\n  }\n\n  subValues(a, b) {\n    return (a - b < 0) ? (a + 26 - b) : (a - b);\n  }\n\n  encrypt(letter, rotors, rotorPositions, reflector) {\n    let result;\n    const letterIndex = Alphabet.indexOf(letter);\n    const numberOfRotors = rotorPositions.length;\n\n    for (let i = 0; i < numberOfRotors; i++) {\n      if (i == 0) {\n        result = Alphabet.indexOf(rotors[i][this.sumValues(rotorPositions[i], letterIndex)]);\n      } else {\n        result = Alphabet.indexOf(rotors[i][this.sumValues(result, this.subValues(rotorPositions[i], rotorPositions[i - 1]))]);\n      }\n    }\n\n    result = rotors[numberOfRotors - 1].indexOf(Alphabet[this.sumValues(Alphabet.indexOf(reflector[this.subValues(result, rotorPositions[numberOfRotors - 1])]), rotorPositions[numberOfRotors - 1])]);\n\n    for (let i = numberOfRotors - 1; i >= 0; i--) {\n      if (i == 0) {\n        result = this.subValues(result, rotorPositions[0]);\n      } else {\n        result = rotors[i - 1].indexOf(Alphabet[this.subValues(result, this.subValues(rotorPositions[i], rotorPositions[i - 1]))]);\n      }\n    }\n\n    result = Alphabet[result];\n\n    return result;\n  }\n}\n\nconst enigma = new Enigma();\nexport default enigma;\n","import {RotorOption, ReflectorOption, Alphabet} from './data';\nimport Rotors from './rotors';\nimport Lampboard from './lampboard';\nimport Keyboard from './keyboard';\nimport Plugboard from './plugboard';\nimport Settings from './settings';\nimport Message from './message';\nimport Enigma from './enigma';\n\nclass App {\n  constructor(rotorSet, rotorSetNotch, reflector) {\n    this.rotorSet = rotorSet;\n    this.rotorSetNotch = rotorSetNotch;\n    this.reflector = reflector;\n  }\n\n  init() {\n    Keyboard.init();\n    Plugboard.init();\n    Rotors.init();\n    Settings.init();\n    Message.init();\n\n    const resetButton = document.querySelector('.reset');\n    resetButton.onclick = () => {\n      resetButton.disabled = true;\n      resetButton.style.transitionDuration = '0.5s';\n      resetButton.style.transform = 'rotate(360deg)';\n\n      this.reset();\n\n      setTimeout(() => {\n        resetButton.disabled = false;\n        resetButton.style.transitionDuration = '0s';\n        resetButton.style.transform = '';\n      }, 500);\n    };\n  }\n\n  reset() {\n    Rotors.reset();\n    Lampboard.reset();\n    Plugboard.reset();\n  }\n\n  changeRotor(rotor, notch, rotorIndex) {\n    this.rotorSet[rotorIndex] = rotor;\n    this.rotorSetNotch[rotorIndex] = notch;\n  }\n\n  changeReflector(reflector) {\n    this.reflector = reflector;\n  }\n\n  inputAction(letter) {\n    if (letter in Plugboard.connections) {\n      letter = Plugboard.connections[letter];\n    }\n\n    const rotorsToStep = [0];\n\n    for (let i = 0; i < this.rotorSet.length - 1; i++) {\n      const currentValue = Alphabet[Rotors.valueIndex[i]];\n      if (currentValue == this.rotorSetNotch[i]) {\n        rotorsToStep.push(i + 1);\n      } else {\n        break;\n      }\n    }\n\n    rotorsToStep.forEach((item) => {\n      Rotors.stepRotor(item);\n    });\n\n    let result = Enigma.encrypt(letter, this.rotorSet, Rotors.valueIndex, this.reflector);\n\n    if (result in Plugboard.connections) {\n      result = Plugboard.connections[result];\n    }\n\n    Lampboard.newOutput(result);\n\n    return result;\n  }\n}\n\nconst app = new App([RotorOption.III.alphabet, RotorOption.II.alphabet, RotorOption.I.alphabet], [RotorOption.III.notch, RotorOption.II.notch, RotorOption.I.notch], ReflectorOption.B);\napp.init();\n\nKeyboard.inputAction = (letter) => {\n  app.inputAction(letter);\n};\n\nSettings.changeReflector = (value) => {\n  app.reflector = ReflectorOption[value];\n  app.reset();\n};\n\nSettings.changeRotor = (rotor, value) => {\n  app.rotorSet[rotor] = RotorOption[value]['alphabet'];\n  app.rotorSetNotch[rotor] = RotorOption[value]['notch'];\n  app.reset();\n};\n\nMessage.encryptText = (text) => {\n  let output = '';\n\n  for (let i = 0; i < text.length; i++) {\n    if (text[i] == ' ') {\n      output += text[i];\n    } else {\n      output += app.inputAction(text[i]);\n    }\n  }\n\n  return output;\n};\n"],"names":["Alphabet","Layout","RotorOption","ReflectorOption","Rotors","constructor","classAttribute","rotors","Array","from","document","querySelectorAll","reverse","valueIndex","setValue","rotorIndex","value","rotor","indexOf","mainWindow","querySelector","firstNextWindow","previousElementSibling","secondNextWindow","firstPrevWindow","nextElementSibling","secondPrevWindow","wheel","firstNextValueIndex","secondNextValueIndex","firstPrevValueIndex","secondPrevValueIndex","innerText","style","backgroundPositionY","stepRotor","newValueIndex","newValue","getCurrentState","bind","index","entries","btnNext","btnPrev","input","onclick","currentValueIndex","onkeypress","e","stopPropagation","onchange","validity","valid","length","toUpperCase","reset","i","init","Lampboard","lamps","lastIndex","newOutput","letter","newIndex","classList","add","currentIndex","remove","lampboard","Keyboard","keys","inputAction","key","re","test","keyboard","Plugboard","sockets","connections","prevSocket","createPlug","pairLetter","plug","createElement","tabIndex","setAttribute","disconnectSockets","plug1","plug2","letter1","letter2","connectSockets","socket1","socket2","evt","appendChild","socket","blur","plugboard","Settings","classDialogue","classToggle","classSelect","dialogueClass","toggleClass","selectClass","changeRotor","changeReflector","createOption","option","dialogue","toggle","selects","reflectors","Object","forEach","item","settings","Message","classModal","idDate","idTime","classInput","idCheckbox","classSubmit","classOutput","modalClass","dateID","timeID","inputClass","checkboxID","submitClass","outputClass","month","setTime","dateArea","getElementById","timeArea","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","hours","getHours","minutes","getMinutes","dateTime","encryptText","text","modal","content","checkbox","submit","output","onkeyup","replace","checked","match","join","message","Enigma","sumValues","a","b","subValues","encrypt","rotorPositions","reflector","result","letterIndex","numberOfRotors","enigma","App","rotorSet","rotorSetNotch","resetButton","disabled","transitionDuration","transform","setTimeout","notch","rotorsToStep","currentValue","push","app","III","alphabet","II","I","B"],"mappings":"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"}